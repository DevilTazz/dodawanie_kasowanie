<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tile Removal Example</title>
    <style>
        .icon {
            display: inline-block;
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px;
        }

        .remove-btn {
            background-color: red;
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 5px;
        }

        #trash {
            width: 50px;
            height: 50px;
            background-image: url('trash-icon.png');
            background-size: cover;
            border: 1px solid black;
            margin-top: 20px;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
</head>
<body>
  

  <div class="icon-container" id="sortable-container">
            <!-- Ikony zostaną dodane dynamicznie -->
            <div id="add-tile">+</div>
  </div>

  <!-- Dymek do wybierania kafelków -->
    <div id="tile-popup" class="popup hidden">
        <div class="popup-content-tiles">
            <span id="close-tile-popup" class="close-btn">&times;</span>
            <h2>Dodaj kafelek</h2>
            <div id="available-tiles" class="tile-list"></div>
        </div>
    </div>

    <!-- Kosz -->
    <div id="trash"></div>

    <script>
        const sortableContainer = document.getElementById('sortable-container');
        const trashIcon = document.getElementById('trash');

        // Function to create a tile (dodawanie kafelka)
        function createTileForMainScreen(iconSrc, tileId, tileName, tileLink) {
            const tile = document.createElement("div");
            tile.className = "icon";
            tile.innerHTML = `<a href="${tileLink}"><img src="${iconSrc}" alt="Tile"><div class="name">${tileName}</div></a>
                              <button class="remove-btn" data-tile-id="${tileId}">Usuń</button>`;
            tile.id = tileId;

            // Dodaj obsługę przeciągania
            tile.setAttribute("draggable", "true");
            tile.addEventListener("dragstart", function(event) {
                event.dataTransfer.setData("text/plain", tileId);
            });

            // Event listener dla przycisku "Usuń"
            const removeButton = tile.querySelector('.remove-btn');
            removeButton.addEventListener('click', function() {
                removeTileFromMainScreen(tileId); // Usuwanie kafelka po kliknięciu przycisku
            });

            // Logowanie do konsoli
            console.log(tile.innerHTML); // Zobacz zawartość
            console.log(tile.outerHTML); // Zobacz pełną strukturę elementu
            
            return tile;
        }

        // Function to remove a tile from the main screen (usuwanie kafelka)
        function removeTileFromMainScreen(tileId) {
            const tileToRemove = document.getElementById(tileId); // Znajdź kafelek po ID
            if (tileToRemove) {
                sortableContainer.removeChild(tileToRemove); // Usuń kafelek z kontenera
                console.log(`Tile with ID ${tileId} removed from main screen.`);
            } else {
                console.error(`Tile with ID ${tileId} not found on the main screen.`);
            }
        }

        // Event listener na przeciąganie i upuszczenie kafelka na kosz
        trashIcon.addEventListener('dragover', function(event) {
            event.preventDefault(); // Pozwól na upuszczenie
        });

        trashIcon.addEventListener('drop', function(event) {
            event.preventDefault();
            const tileId = event.dataTransfer.getData('text/plain');
            removeTileFromMainScreen(tileId); // Usuwanie kafelka po przeciągnięciu na kosz
        });

        // Dodaj przykładowe kafelki do strony
        const tile1 = createTileForMainScreen("tile1.jpg", "tile1", "Tile 1", "#");
        const tile2 = createTileForMainScreen("tile2.jpg", "tile2", "Tile 2", "#");

        sortableContainer.appendChild(tile1);
        sortableContainer.appendChild(tile2);
    </script>



</body>
</html>
